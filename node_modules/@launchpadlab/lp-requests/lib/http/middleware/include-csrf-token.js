'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _isString2=require('lodash/isString');var _isString3=_interopRequireDefault(_isString2);var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DEFAULT_CSRF_SELECTOR='csrf-token';var CSRF_METHODS=['PATCH','POST','PUT','DELETE'];function getTokenFromDocument(csrf){if(!document)return;var selector=(0,_isString3.default)(csrf)?csrf:DEFAULT_CSRF_SELECTOR;var meta=document.querySelector('meta[name="'+selector+'"]');if(meta&&meta instanceof window.HTMLMetaElement)return meta.content}function includeCSRFToken(_ref){var method=_ref.method,_ref$csrf=_ref.csrf,csrf=_ref$csrf===undefined?true:_ref$csrf,headers=_ref.headers;if(!csrf||!CSRF_METHODS.includes(method))return;var token=getTokenFromDocument(csrf);if(!token)return;return{headers:_extends({},headers,{'X-CSRF-Token':token})}}exports.default=includeCSRFToken;