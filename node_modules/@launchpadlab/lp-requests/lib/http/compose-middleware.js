'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _merge2=require('lodash/fp/merge');var _merge3=_interopRequireDefault(_merge2);var _utils=require('../utils');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function composeMiddleware(){for(var _len=arguments.length,middlewares=Array(_len),_key=0;_key<_len;_key++){middlewares[_key]=arguments[_key]}var asyncMiddlewares=middlewares.map(_utils.ensureAsync);return function callMiddleware(initialValue){return(0,_utils.asyncReduce)(asyncMiddlewares,function(acc,middleware){return middleware(acc).then(function(result){return(0,_merge3.default)(acc,result||{})})},initialValue)}}exports.default=composeMiddleware;