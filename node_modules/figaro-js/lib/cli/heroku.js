'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _omitBy2=require('lodash/omitBy');var _omitBy3=_interopRequireDefault(_omitBy2);var _isUndefined2=require('lodash/isUndefined');var _isUndefined3=_interopRequireDefault(_isUndefined2);var _map2=require('lodash/map');var _map3=_interopRequireDefault(_map2);var _read=require('../read');var _read2=_interopRequireDefault(_read);var _child_process=require('child_process');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function stringifyOptions(options){var definedOptions=(0,_omitBy3.default)(options,_isUndefined3.default);return(0,_map3.default)(definedOptions,function(value,key){return'--'+key+'='+value}).join(' ')}function stringifyEnv(env){return(0,_map3.default)(env,function(value,key){return key+'='+value}).join(' ')}function uploadToHeroku(_ref){var app=_ref.app,environment=_ref.environment,path=_ref.path,remote=_ref.remote;var env=(0,_read2.default)({path:path,environment:environment});var command=('heroku config:set '+stringifyEnv(env)+' '+stringifyOptions({app:app,remote:remote})).trim();return(0,_child_process.execSync)(command,{stdio:'inherit'})}function registerCommands(program){return program.command('heroku:set').option('-a, --app [app]','Specify a Heroku app').option('-e, --environment [environment]','Specify an application environment').option('-p, --path [path]','Specify a configuration file path (Default: config/application.yml)').option('--remote [remote]','Specify a Heroku git remote').action(uploadToHeroku)}exports.default=registerCommands;